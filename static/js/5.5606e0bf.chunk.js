(this.webpackJsonpnewclient=this.webpackJsonpnewclient||[]).push([[5],{230:function(e,t,a){"use strict";var i=a(17);t.a=function(e){return{defaultFontStyle:{fontFamily:i.j,fontSize:"0.9rem",lineHeight:1.5,color:e.palette.text.primary},defaultHeaderMargins:{marginTop:"20px",marginBottom:"10px"},title:{fontSize:i.p,color:e.palette.text.primary,fontWeight:200,letterSpacing:.3},smaller:{fontSize:i.m},quote:{padding:"10px 20px",margin:"0 0 20px",fontSize:i.o,borderLeft:i.s},quoteText:{margin:"0 0 10px",fontStyle:"italic"},quoteAuthor:{display:"block",fontSize:"80%",lineHeight:"1.42857143",color:e.palette.text.secondary},mutedText:{color:e.palette.text.secondary},primaryText:{color:e.palette.primary.main},normalText:{fontSize:i.n,color:e.palette.text.primary,lineHeight:"normal",fontWeight:300,wordBreak:"break-word"},smallTitleText:{color:e.palette.text.primary,fontSize:i.n,fontWeight:400,wordBreak:"break-word"},success:{color:e.palette.success.main},warning:{color:e.palette.warning.main},error:{color:e.palette.error.main},white:{color:e.palette.white.main},link:{color:e.palette.link.main},contrasted:{color:e.palette.text.fixed},small:{fontSize:i.q},big:{fontSize:i.m},primary:{color:e.palette.primary.main},default:{color:e.palette.text.primary},center:{textAlign:"center"},bold:{fontWeight:600},normal:{fontWeight:400},light:{fontWeight:300},italic:{fontStyle:"italic"},caption:{color:e.palette.text.secondary,fontSize:i.q,fontWeight:i.r},underline:{textDecoration:"underline"},ellipsis:{whiteSpace:"nowrap !important",overflow:"hidden",textOverflow:"ellipsis"},hoverable:{cursor:"pointer","&:hover":{textDecoration:"underline"}},margin:{marginLeft:5},minWidth:{minWidth:180},preWrap:{whiteSpace:"pre-wrap",wordBreak:"break-word"},noWrap:{wordBreak:"inherit"},centered:{textAlign:"center"}}}},231:function(e,t,a){"use strict";var i=a(6),n=(a(0),a(28)),r=a.n(n),o=a(84),c=a.n(o),s=a(230),l=a(2);t.a=c()(s.a)((function(e){var t,a=Object.assign({},e),n=a.classes,o=a.children,c=a.centered,s=a.center,d=a.className,h=a.color,p=a.bold,b=a.normal,u=a.style,m=a.small,g=r()((t={},Object(i.a)(t,n.defaultFontStyle,!0),Object(i.a)(t,n.title,!0),Object(i.a)(t,d,!0),Object(i.a)(t,n[h],h),Object(i.a)(t,n.center,c),Object(i.a)(t,n.center,s),Object(i.a)(t,n.bold,p),Object(i.a)(t,n.normal,b),Object(i.a)(t,n.smaller,m),t));return Object(l.jsx)("div",{className:g,style:u,children:o})}))},237:function(e,t,a){"use strict";var i=a(6),n=(a(0),a(28)),r=a.n(n),o=a(84),c=a.n(o),s=a(230),l=a(2);t.a=c()(s.a)((function(e){var t,a=Object.assign({},e),n=a.classes,o=a.children,c=a.centered,s=a.error,d=a.white,h=a.big,p=a.className,b=a.bold,u=a.normal,m=a.small,g=a.color,j=a.light,f=a.italic,v=a.hoverable,O=a.margin,x=a.minWidth,y=a.preWrap,w=a.noWrap,k=r()((t={},Object(i.a)(t,p,p),Object(i.a)(t,n.defaultFontStyle,!0),Object(i.a)(t,n.smallTitleText,!0),Object(i.a)(t,n.error,s),Object(i.a)(t,n.white,d),Object(i.a)(t,n.big,h),Object(i.a)(t,n.bold,b),Object(i.a)(t,n.normal,u),Object(i.a)(t,n.light,j),Object(i.a)(t,n.small,m),Object(i.a)(t,n.italic,f),Object(i.a)(t,n.hoverable,v),Object(i.a)(t,n.margin,O),Object(i.a)(t,n.minWidth,x),Object(i.a)(t,n.preWrap,y),Object(i.a)(t,n.preWrap,c),Object(i.a)(t,n.noWrap,w),Object(i.a)(t,n[g],g),t));return Object(l.jsx)("div",{className:k,children:o})}))},238:function(e,t,a){"use strict";var i=a(4),n=a(6),r=(a(0),a(200)),o=a(17),c=function(e){return{root:{boxShadow:e.palette.boxShadow.main,background:e.palette.background.paper,margin:16,padding:16,borderRadius:8},noPadding:{padding:0},noMargin:{margin:0,marginTop:10},widget:{margin:0,marginTop:0,boxShadow:"unset"},noShadow:{boxShadow:"unset"},vignette:{padding:"13px 10px 13px 15px",borderLeft:o.b,minWidth:200}}},s=a(28),l=a.n(s),d=a(2);t.a=Object(r.a)(c)((function(e){var t,a=e.classes,r=e.className,o=e.children,c=e.noPadding,s=e.noMargin,h=e.onClick,p=e.width,b=e.vignette,u=e.noShadow,m=e.widget,g=e.style,j=l()((t={},Object(n.a)(t,a.root,!0),Object(n.a)(t,r,r),Object(n.a)(t,a.noMargin,s),Object(n.a)(t,a.noPadding,c),Object(n.a)(t,a.vignette,b),Object(n.a)(t,a.widget,m),Object(n.a)(t,a.noShadow,u),t));return Object(d.jsx)("div",{className:j,style:Object(i.a)({width:p},g),onClick:h,children:o})}))},250:function(e,t,a){var i=a(251).NoVideoInputDevicesError;function n(e,t,a){return e.length>0?e[0].deviceId:1==t.length||"user"==a?t[0].deviceId:t[1].deviceId}var r=function(e){return"environment"==e?/rear|back|environment/gi:/front|user|face/gi};e.exports={getDeviceId:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;return new Promise((function(a,n){var o;try{o=navigator.mediaDevices.enumerateDevices()}catch(c){n(new i)}o.then((function(o){var c=o.filter((function(e){return"videoinput"==e.kind}));if(c.length<1)n(new i);else{var s=r(e),l=c.filter((function(e){var t=e.label;return s.test(t)}));a(t(l,c,e))}}))}))},getFacingModePattern:r}},251:function(e,t){function a(){this.name="NoVideoInputDevicesError",this.message="No video input devices found"}a.prototype=new Error,e.exports={NoVideoInputDevicesError:a}},252:function(e,t){e.exports=function(e,t,a){var i=[];return a.forEach((function(a){e[a]!==t[a]&&i.push(a)})),i}},253:function(e,t){e.exports=function(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(n){if("TypeError"!==n.name)throw n;for(var a=new(window.BlobBuilder||window.MSBlobBuilder||window.MozBlobBuilder||window.WebKitBlobBuilder),i=0;i<e.length;i+=1)a.append(e[i]);return a.getBlob(t.type)}}},254:function(e,t,a){var i=a(255);self.addEventListener("message",(function(e){var t=i(e.data.data,e.data.width,e.data.height);t?postMessage(t.data):postMessage(null)}))},273:function(e,t,a){"use strict";a.r(t);var i=a(44),n=a(0),r=function(){return{root:{width:"100%",display:"flex",flexDirection:"column"},titleWrapper:{display:"flex",alignItems:"end",justifyContent:"center",width:"100%",marginTop:30},title:{fontSize:"3rem"},card:{display:"flex",alignItems:"center"},smallTitle:{fontSize:"1.6rem",marginLeft:20},scanner:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",height:"70%"},img:{width:"60%",height:"auto"},modalWrapper:{display:"flex",alignItems:"center",justifyContent:"space-around",flexDirection:"column",textAlign:"center"},points:{fontSize:"3rem"}}},o=a(200),c=a(231),s=a(237),l=a(4),d=a(6),h=a(85),p=a(11),b=function(){return{container:{padding:"10px 0 0 10px"}}},u=a(28),m=a.n(u),g=a(84),j=a.n(g),f=a(230),v=a(2),O=j()(f.a)((function(e){var t,a=Object.assign({},e),i=a.classes,n=a.children,r=a.centered,o=a.preWrap,c=a.white,s=a.small,l=a.caption,h=a.bold,p=a.normal,b=a.className,u=a.onClick,g=a.color,j=a.light,f=a.underline,O=a.ellipsis,x=a.hoverable,y=a.margin,w=a.noWrap,k=a.style,S=m()((t={},Object(d.a)(t,i.defaultFontStyle,!0),Object(d.a)(t,i.normalText,!0),Object(d.a)(t,i.white,c),Object(d.a)(t,i.small,s),Object(d.a)(t,i.caption,l),Object(d.a)(t,i.bold,h),Object(d.a)(t,i.normal,p),Object(d.a)(t,i.light,j),Object(d.a)(t,i.underline,f),Object(d.a)(t,i.ellipsis,O),Object(d.a)(t,i.hoverable,x),Object(d.a)(t,i.margin,y),Object(d.a)(t,i.preWrap,o),Object(d.a)(t,i.preWrap,r),Object(d.a)(t,i[g],g),Object(d.a)(t,i.noWrap,w),Object(d.a)(t,b,b),t));return Object(v.jsx)("div",{onClick:u,className:S,style:k,children:n})})),x=a(90),y=["errorMessage","noPadding","classes"],w=Object(p.a)(b)((function(e){var t=e.errorMessage,a=e.noPadding,i=e.classes,r=Object(h.a)(e,y),o=m()(Object(d.a)({},i.container,!a));if(t){if(t.message)return t.message instanceof Array?Object(v.jsx)("div",Object(l.a)(Object(l.a)({className:o},r),{},{children:Object(v.jsx)(O,{noWrap:!0,color:"error",children:Object(x.b)(t.message[0].message)})})):Object(v.jsx)("div",Object(l.a)(Object(l.a)({className:o},r),{},{children:Object(v.jsx)(O,{noWrap:!0,color:"error",children:Object(x.b)(t.message)})}));if("string"===typeof t)return Object(v.jsx)("div",Object(l.a)(Object(l.a)({className:o},r),{},{children:Object(v.jsx)(O,{noWrap:!0,color:"error",children:Object(x.b)(t)})}))}return Object(v.jsx)(n.Fragment,{})})),k=a(106),S=a(247),M=a(239),W=a(248),L=a(249),C=a(240),N=a(259),R=a(258),D=a(0).Component,I=a(250),T=I.getDeviceId,z=(I.getFacingModePattern,a(252)),B=(a(253),a(254));a(257);var F=B.toString(),E=new Blob(["(".concat(F,")()")]),V=["delay","legacyMode","facingMode"];(function(e){Object(N.a)(a,e);var t=Object(R.a)(a);function a(e){var i;return Object(W.a)(this,a),(i=t.call(this,e)).els={},i.state={mirrorVideo:!1},i.initiate=i.initiate.bind(Object(C.a)(i)),i.initiateLegacyMode=i.initiateLegacyMode.bind(Object(C.a)(i)),i.check=i.check.bind(Object(C.a)(i)),i.handleVideo=i.handleVideo.bind(Object(C.a)(i)),i.handleLoadStart=i.handleLoadStart.bind(Object(C.a)(i)),i.handleInputChange=i.handleInputChange.bind(Object(C.a)(i)),i.clearComponent=i.clearComponent.bind(Object(C.a)(i)),i.handleReaderLoad=i.handleReaderLoad.bind(Object(C.a)(i)),i.openImageDialog=i.openImageDialog.bind(Object(C.a)(i)),i.handleWorkerMessage=i.handleWorkerMessage.bind(Object(C.a)(i)),i.setRefFactory=i.setRefFactory.bind(Object(C.a)(i)),i}return Object(L.a)(a,[{key:"componentDidMount",value:function(){this.worker=new Worker(URL.createObjectURL(E)),this.worker.onmessage=this.handleWorkerMessage,this.props.legacyMode?this.initiateLegacyMode():this.initiate()}},{key:"componentWillReceiveProps",value:function(e){var t,a=z(this.props,e,V),i=Object(M.a)(a);try{for(i.s();!(t=i.n()).done;){var n=t.value;if("facingMode"==n){this.clearComponent(),this.initiate(e);break}if("delay"==n)0!=this.props.delay||e.legacyMode||(this.timeout=setTimeout(this.check,e.delay)),0==e.delay&&clearTimeout(this.timeout);else if("legacyMode"==n){this.props.legacyMode&&!e.legacyMode?(this.clearComponent(),this.initiate(e)):(this.clearComponent(),this.componentDidUpdate=this.initiateLegacyMode);break}}}catch(r){i.e(r)}finally{i.f()}}},{key:"shouldComponentUpdate",value:function(e,t){return t!==this.state||z(this.props,e,V).length>0}},{key:"componentWillUnmount",value:function(){this.worker&&(this.worker.terminate(),this.worker=void 0),this.clearComponent()}},{key:"clearComponent",value:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0),this.stopCamera&&this.stopCamera(),this.reader&&this.reader.removeEventListener("load",this.handleReaderLoad),this.els.img&&this.els.img.removeEventListener("load",this.check)}},{key:"initiate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.onError,a=e.facingMode,i=/firefox/i.test(navigator.userAgent),n={};navigator.mediaDevices&&"function"===typeof navigator.mediaDevices.getSupportedConstraints&&(n=navigator.mediaDevices.getSupportedConstraints());var r={};n.facingMode&&(r.facingMode={ideal:a}),n.frameRate&&(r.frameRate={ideal:25,min:10});var o=n.facingMode||i?Promise.resolve(e.constraints||r):T(a).then((function(t){return Object.assign({},{deviceId:t},e.constraints)}));o.then((function(e){return navigator.mediaDevices.getUserMedia({video:e})})).then(this.handleVideo).catch(t)}},{key:"handleVideo",value:function(e){var t=this.els.preview,a=this.props.facingMode;if(!t)return setTimeout(this.handleVideo,200,e);void 0!==(t||{}).srcObject?t.srcObject=e:void 0!==t.mozSrcObject?t.mozSrcObject=e:window.URL.createObjectURL?t.src=window.URL.createObjectURL(e):window.webkitURL?t.src=window.webkitURL.createObjectURL(e):t.src=e,t.playsInline=!0;var i=e.getTracks()[0];this.stopCamera=i.stop.bind(i),t.addEventListener("loadstart",this.handleLoadStart),this.setState({mirrorVideo:"user"==a,streamLabel:i.label})}},{key:"handleLoadStart",value:function(){var e=this.props,t=e.delay,a=e.onLoad,i=this.state,n=i.mirrorVideo,r=i.streamLabel,o=this.els.preview;o.play(),"function"==typeof a&&a({mirrorVideo:n,streamLabel:r}),"number"==typeof t&&(this.timeout=setTimeout(this.check,t)),o.removeEventListener("loadstart",this.handleLoadStart)}},{key:"check",value:function(){var e=this.props,t=e.legacyMode,a=e.resolution,i=e.delay,n=this.els,r=n.preview,o=n.canvas,c=n.img,s=Math.floor(t?c.naturalWidth:r.videoWidth),l=Math.floor(t?c.naturalHeight:r.videoHeight),d=0,h=0;if(t){var p=a/(s>l?s:l);l*=p,s*=p,o.width=s,o.height=l}else{var b=a/(s<l?s:l);h=((l*=b)-a)/2*-1,d=((s*=b)-a)/2*-1,o.width=a,o.height=a}var u=r&&r.readyState===r.HAVE_ENOUGH_DATA;if(t||u){var m=o.getContext("2d");m.drawImage(t?c:r,d,h,s,l);var g=m.getImageData(0,0,o.width,o.height);this.worker.postMessage(g)}else this.timeout=setTimeout(this.check,i)}},{key:"handleWorkerMessage",value:function(e){var t=this.props,a=t.onScan,i=t.legacyMode,n=t.delay;a(e.data||null),!i&&"number"==typeof n&&this.worker&&(this.timeout=setTimeout(this.check,n))}},{key:"initiateLegacyMode",value:function(){this.reader=new FileReader,this.reader.addEventListener("load",this.handleReaderLoad),this.els.img.addEventListener("load",this.check,!1),this.componentDidUpdate=void 0,"function"==typeof this.props.onLoad&&this.props.onLoad()}},{key:"handleInputChange",value:function(e){var t=e.target.files[0];this.reader.readAsDataURL(t)}},{key:"handleReaderLoad",value:function(e){this.els.img.src=e.target.result}},{key:"openImageDialog",value:function(){this.els.input.click()}},{key:"setRefFactory",value:function(e){var t=this;return function(a){t.els[e]=a}}},{key:"render",value:function(){var e=this.props,t=e.style,a=e.className,i=e.onImageLoad,n=e.legacyMode,r=e.showViewFinder,o=(e.facingMode,{display:"none"}),c={top:0,left:0,display:"block",position:"absolute",overflow:"hidden",width:"100%",height:"100%"},s=Object(l.a)(Object(l.a)({},c),{},{objectFit:"cover",transform:this.state.mirrorVideo?"scaleX(-1)":void 0}),d=Object(l.a)(Object(l.a)({},c),{},{objectFit:"scale-down"});return Object(v.jsx)("section",{className:a,style:t,children:Object(v.jsxs)("section",{style:{overflow:"hidden",position:"relative",width:"100%",paddingTop:"100%"},children:[!n&&r?Object(v.jsx)("div",{style:{top:0,left:0,zIndex:1,boxSizing:"border-box",border:"50px solid rgba(0, 0, 0, 0.3)",boxShadow:"inset 0 0 0 5px rgba(255, 0, 0, 0.5)",position:"absolute",width:"100%",height:"100%"}}):null,n?Object(v.jsx)("input",{style:o,type:"file",accept:"image/*",ref:this.setRefFactory("input"),onChange:this.handleInputChange}):null,n?Object(v.jsx)("img",{style:d,ref:this.setRefFactory("img"),onLoad:i}):Object(v.jsx)("video",{style:s,ref:this.setRefFactory("preview")}),Object(v.jsx)("canvas",{style:o,ref:this.setRefFactory("canvas")})]})})}}]),a}(D)).defaultProps={delay:500,resolution:600,facingMode:"environment",showViewFinder:!0,constraints:null};var U=a(34),A=a(271),P=a(272),H=function(e){return{paper:{boxShadow:e.palette.boxShadow.main,background:e.palette.background.paper,padding:0,outline:"none",borderRadius:8,height:"100%",display:"flex",maxHeight:"90vh",overflowY:"overlay"},iconButton:{position:"absolute",zIndex:"4",right:"5px",top:"5px"},maxWidth:{maxWidth:0},noScroll:{overflow:"initial !important"}}},q=a(274),G=a(104),J=Object(o.a)(H)((function(e){var t,a=e.classes,i=e.className,r=e.children,o=e.open,c=e.onClose,s=e.fullWidth,l=e.maxWidth,h=e.disableBackdropClick,p=void 0===h||h,b=m()((t={},Object(d.a)(t,i,i),Object(d.a)(t,a.paper,!0),t)),u=Object(U.a)(),g=Object(A.a)(u.breakpoints.down("xs"));return Object(n.useEffect)((function(){setTimeout((function(){var e,t=document.querySelectorAll('div[tabindex*="-1"]'),a=Object(M.a)(t);try{for(a.s();!(e=a.n()).done;){e.value.removeAttribute("tabindex")}}catch(i){a.e(i)}finally{a.f()}}),100)}),[o]),Object(v.jsx)(q.a,{open:o,onClose:c,fullScreen:g||s,classes:{paper:i},maxWidth:l,disableBackdropClick:p,children:Object(v.jsxs)("div",{className:b,children:[c&&Object(v.jsx)(P.a,{className:a.iconButton,"aria-label":"Delete",onClick:c,children:Object(v.jsx)(G.a,{size:16,color:u.palette.text.contrasted,children:"Close"})}),r]})})})),_=a(238),K=a.p+"static/media/done.c2aca6b7.png",X=a(51);t.default=Object(o.a)(r)((function(e){var t=e.classes,a=Object(n.useState)(null),r=Object(i.a)(a,2),o=r[0],l=r[1],d=Object(n.useState)(null),h=Object(i.a)(d,2),p=h[0],b=h[1];return Object(v.jsxs)("div",{className:t.root,children:[Object(v.jsx)("div",{className:t.titleWrapper,children:Object(v.jsx)(c.a,{className:t.title,children:"SCANNER"})}),Object(v.jsx)("div",{className:t.scanner,children:!p&&Object(v.jsx)(S.a,{style:{height:300,width:300,border:"2px solid white"},delay:1e3,facingMode:"environment",onScan:function(e){e&&(console.log(e),b(null===e||void 0===e?void 0:e.text))},onError:function(e){console.error(e),l(e)},constraints:{audio:!1,video:{facingMode:"user"}}})}),Object(v.jsx)(J,{open:Boolean(p),onClose:function(){return b(null)},fullWidth:!0,children:Object(v.jsxs)(_.a,{className:t.modalWrapper,children:[Object(v.jsx)(c.a,{children:"Scan Effectu\xe9"}),Object(v.jsx)("img",{className:t.img,src:K,alt:"done"}),Object(v.jsx)(s.a,{children:"Vos point on \xe9t\xe9 comptabilis\xe9 ! Galactus \xe0 \xe9t\xe9 capturer"}),Object(v.jsxs)(s.a,{children:["Vous gagnez ",Object(v.jsx)("span",{className:t.points,children:"8"})," points par secondes en plus"]}),Object(v.jsx)(s.a,{children:"Foncez en r\xe9cuperer d'autres !"}),Object(v.jsx)(X.b,{to:"/app/dashboard",children:Object(v.jsx)(k.a,{children:"Voir Nos Points"})})]})}),Object(v.jsx)(w,{errorMessage:o}),Object(v.jsx)(O,{children:p})]})}))}}]);